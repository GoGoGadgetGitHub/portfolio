var e=globalThis,t={},n={},a=e.parcelRequire94c2;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,a.call(r.exports,r,r.exports),r.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequire94c2=a),a.register;var r=a("jy3SA");const o=document.getElementById("login"),i=document.getElementById("signup"),s=document.getElementById("message");o&&o.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("email").value,{data:n,error:a}=await (0,r.supabase).auth.signInWithOtp({email:t,options:{emailRedirectTo:"https://gogogadgetgithub.github.io/#"}});a?s.textContent=a.message:(document.getElementById("submit").classList.add("hide"),s.textContent="Check your email and click the link to login. \n You can close this tab.")}),i&&document.getElementById("signup").addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("email").value,n=document.getElementById("username").value;try{let{data:e,error:a}=await (0,r.supabase).auth.signInWithOtp({email:t});if(a){console.log(a.message);return}let{data:o,error:i}=await (0,r.supabase).functions.invoke("new-user",{body:{username:n,email:t}});i&&console.error(`error invoking new user edge functions: ${i.message}`)}catch(e){s.textContent="some big bad scary error",console.error(e)}});
//# sourceMappingURL=login.2e90d4f2.js.map
