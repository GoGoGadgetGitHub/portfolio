var e=globalThis,t={},o={},n=e.parcelRequire94c2;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},e.parcelRequire94c2=n),n.register;var r=n("jy3SA");const s=document.getElementById("auth");document.getElementById("login-link");const a=document.getElementById("dropdown-content");async function i(){let e;var{data:{user:t},userError:o}=await (0,r.supabase).auth.getUser();if(o){console.log(`Error getting user: ${error.message}`);return}let n=t.id;var{data:i,profileError:u}=await (0,r.supabase).from("profiles").select("username").eq("id",n).single();u&&console.log(`Error fetching profile: ${error}`);let d=i.username;s.textContent=d,s.onclick=c,(e=document.createElement("div")).id="user-div",e.textContent="Log out",a.appendChild(e),e.onclick=l,(e=document.createElement("div")).id="user-div",e.textContent="Delete Account",a.appendChild(e)}function c(){if(a.classList.contains("hide")){a.classList.remove("hide");return}a.classList.add("hide")}async function l(){let{error:e}=await (0,r.supabase).auth.signOut();location.reload()}async function u(){console.log("checking user");let{data:{session:e},error:t}=await (0,r.supabase).auth.getSession();return t?(console.log(`Can't check session for some odd reason: ${t.message}`),!1):e?(console.log("user found"),!0):(console.log("no user logged in"),!1)}!async function(){await u()&&i()}();
//# sourceMappingURL=index.0cdc6a3e.js.map
