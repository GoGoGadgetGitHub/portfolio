{"mappings":"A,I,E,W,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,E,Q,C,I,E,E,SCEA,MAAM,EAAO,SAAS,cAAc,CAAC,QAClB,SAAS,cAAc,CAAC,cAC3C,MAAM,EAAW,SAAS,cAAc,CAAC,oBASzC,eAAe,QAqCT,EAnCJ,GAAI,CAAC,KAAM,CAAA,KAAC,CAAI,CAAC,CAAA,UAAE,CAAS,CAAC,CAAG,MAAM,AAAA,CAAA,EAAA,EAAA,QAAO,AAAP,EAAS,IAAI,CAAC,OAAO,GAE3D,GAAI,EAAU,CACZ,QAAQ,GAAG,CAAC,CAAC,oBAAoB,EAAE,MAAM,OAAO,CAAA,CAAE,EAClD,MACF,CAEA,IAAM,EAAK,EAAK,EAAE,CAClB,GAAI,CAAC,KAAM,CAAO,CAAA,aAAE,CAAY,CAAC,CAAG,MAAM,AAAA,CAAA,EAAA,EAAA,QAAO,AAAP,EACvC,IAAI,CAAC,YACL,MAAM,CAAC,YACP,EAAE,CAAC,KAAM,GACT,MAAM,GAEL,GACF,QAAQ,GAAG,CAAC,CAAC,wBAAwB,EAAE,MAAA,CAAO,EAGhD,IAAM,EAAW,EAAQ,QAAQ,AAEjC,CAAA,EAAK,WAAW,CAAG,EACnB,EAAK,OAAO,CAAG,EAef,CADI,EAAQ,SAAS,aAAa,CAAC,QAC7B,EAAE,CAAG,WACX,EAAM,WAAW,CAAG,UACpB,EAAS,WAAW,CAAC,GACrB,EAAM,OAAO,CAAG,EAEhB,AADA,CAAA,EAAQ,SAAS,aAAa,CAAC,MAA/B,EACM,EAAE,CAAG,WACX,EAAM,WAAW,CAAG,iBACpB,EAAS,WAAW,CAAC,EApBvB,CAGA,SAAS,IACP,GAAI,EAAS,SAAS,CAAC,QAAQ,CAAC,QAAQ,CACtC,EAAS,SAAS,CAAC,MAAM,CAAC,QAC1B,MACF,CACA,EAAS,SAAS,CAAC,GAAG,CAAC,OACzB,CAcA,eAAe,IACb,GAAM,CAAC,MAAA,CAAK,CAAC,CAAG,MAAM,AAAA,CAAA,EAAA,EAAA,QAAO,AAAP,EAAS,IAAI,CAAC,OAAO,GAC3C,SAAS,MAAM,EACjB,CAEA,eAAe,IACb,QAAQ,GAAG,CAAC,iBACZ,GAAM,CAAE,KAAM,CAAA,QAAC,CAAO,CAAC,CAAE,MAAA,CAAK,CAAC,CAAG,MAAM,AAAA,CAAA,EAAA,EAAA,QAAO,AAAP,EAAS,IAAI,CAAC,UAAU,UAChE,AAAI,GACF,QAAQ,GAAG,CAAC,CAAC,yCAAyC,EAAE,EAAM,OAAO,CAAA,CAAE,EAChE,CAAA,GAEL,GACF,QAAQ,GAAG,CAAC,cACL,CAAA,IAET,QAAQ,GAAG,CAAC,qBACL,CAAA,EACT,EA1EA,AAEA,iBACM,MAAM,KACR,GAEJ","sources":["<anon>","src/js/user.js"],"sourcesContent":["\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire94c2\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire94c2\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $jy3SA = parcelRequire(\"jy3SA\");\nconst $7d217b81ff1d49ef$var$auth = document.getElementById(\"auth\");\nconst $7d217b81ff1d49ef$var$logingLink = document.getElementById(\"login-link\");\nconst $7d217b81ff1d49ef$var$dropdown = document.getElementById(\"dropdown-content\");\n$7d217b81ff1d49ef$var$authCheck();\nasync function $7d217b81ff1d49ef$var$authCheck() {\n    if (await $7d217b81ff1d49ef$var$checkUser()) $7d217b81ff1d49ef$var$getUser();\n}\nasync function $7d217b81ff1d49ef$var$getUser() {\n    var { data: { user: user }, userError: userError } = await (0, $jy3SA.supabase).auth.getUser();\n    if (userError) {\n        console.log(`Error getting user: ${error.message}`);\n        return;\n    }\n    const id = user.id;\n    var { data: profile, profileError: profileError } = await (0, $jy3SA.supabase).from('profiles').select('username').eq('id', id).single();\n    if (profileError) console.log(`Error fetching profile: ${error}`);\n    const username = profile.username;\n    $7d217b81ff1d49ef$var$auth.textContent = username;\n    $7d217b81ff1d49ef$var$auth.onclick = $7d217b81ff1d49ef$var$expand;\n    $7d217b81ff1d49ef$var$populate();\n}\nfunction $7d217b81ff1d49ef$var$expand() {\n    if ($7d217b81ff1d49ef$var$dropdown.classList.contains(\"hide\")) {\n        $7d217b81ff1d49ef$var$dropdown.classList.remove(\"hide\");\n        return;\n    }\n    $7d217b81ff1d49ef$var$dropdown.classList.add(\"hide\");\n}\nfunction $7d217b81ff1d49ef$var$populate() {\n    let entry = document.createElement(\"div\");\n    entry.id = \"user-div\";\n    entry.textContent = \"Log out\";\n    $7d217b81ff1d49ef$var$dropdown.appendChild(entry);\n    entry.onclick = $7d217b81ff1d49ef$var$logout;\n    entry = document.createElement(\"div\");\n    entry.id = \"user-div\";\n    entry.textContent = \"Delete Account\";\n    $7d217b81ff1d49ef$var$dropdown.appendChild(entry);\n}\nasync function $7d217b81ff1d49ef$var$logout() {\n    const { error: error1 } = await (0, $jy3SA.supabase).auth.signOut();\n    location.reload();\n}\nasync function $7d217b81ff1d49ef$var$checkUser() {\n    console.log(\"checking user\");\n    const { data: { session: session }, error: error1 } = await (0, $jy3SA.supabase).auth.getSession();\n    if (error1) {\n        console.log(`Can't check session for some odd reason: ${error1.message}`);\n        return false;\n    }\n    if (session) {\n        console.log(\"user found\");\n        return true;\n    }\n    console.log(\"no user logged in\");\n    return false;\n}\n\n\n//# sourceMappingURL=index.0cdc6a3e.js.map\n","import { supabase } from \"./supabaseClient.js\";\n\nconst auth = document.getElementById(\"auth\");\nconst logingLink = document.getElementById(\"login-link\");\nconst dropdown = document.getElementById(\"dropdown-content\")\nauthCheck()\n\nasync function authCheck(){\n  if (await checkUser()) {\n    getUser()\n  }\n}\n\nasync function getUser() {\n\n  var {data: {user}, userError} = await supabase.auth.getUser()\n\n  if (userError){\n    console.log(`Error getting user: ${error.message}`)\n    return\n  }\n\n  const id = user.id\n  var {data: profile, profileError} = await supabase\n    .from('profiles')\n    .select('username')\n    .eq('id', id)\n    .single()\n\n  if (profileError){\n    console.log(`Error fetching profile: ${error}`)\n  }\n\n  const username = profile.username\n\n  auth.textContent = username\n  auth.onclick = expand\n  populate()\n}\n\n\nfunction expand() {\n  if (dropdown.classList.contains(\"hide\")){\n    dropdown.classList.remove(\"hide\")\n    return\n  }\n  dropdown.classList.add(\"hide\")\n}\n\nfunction populate() {\n  let entry = document.createElement(\"div\")\n  entry.id = \"user-div\"\n  entry.textContent = \"Log out\"\n  dropdown.appendChild(entry)\n  entry.onclick = logout\n  entry = document.createElement(\"div\")\n  entry.id = \"user-div\"\n  entry.textContent = \"Delete Account\"\n  dropdown.appendChild(entry)\n}\n\nasync function logout(){\n  const {error} = await supabase.auth.signOut()\n  location.reload()\n}\n\nasync function checkUser() {\n  console.log(\"checking user\")\n  const { data: {session}, error} = await supabase.auth.getSession()\n  if (error){\n    console.log(`Can't check session for some odd reason: ${error.message}`)\n    return false\n  }\n  if (session){\n    console.log(\"user found\")\n    return true\n  }\n  console.log(\"no user logged in\")\n  return false\n}\n"],"names":["$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$jy3SA","$7d217b81ff1d49ef$var$auth","document","getElementById","$7d217b81ff1d49ef$var$dropdown","$7d217b81ff1d49ef$var$getUser","entry","data","user","userError","supabase","auth","getUser","console","log","error","message","profile","profileError","from","select","eq","single","username","textContent","onclick","$7d217b81ff1d49ef$var$expand","createElement","appendChild","$7d217b81ff1d49ef$var$logout","classList","contains","remove","add","error1","signOut","location","reload","$7d217b81ff1d49ef$var$checkUser","session","getSession","$7d217b81ff1d49ef$var$authCheck"],"version":3,"file":"index.0cdc6a3e.js.map"}