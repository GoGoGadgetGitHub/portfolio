{"mappings":"A,I,E,W,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,E,Q,C,I,E,E,SCcA,MAAM,EAAQ,SAAS,cAAc,CAAC,SAChC,EAAU,SAAS,cAAc,CAAC,WAEpC,GACF,EAAM,gBAAgB,CAAC,SAAU,MAAO,IACtC,EAAM,cAAc,GAEpB,IAAM,EAAQ,SAAS,cAAc,CAAC,SAAS,KAAK,CAEpD,GAAI,CAAA,KAAE,CAAI,CAAA,MAAE,CAAK,CAAE,CAAG,MAAM,AAAA,CAAA,EAAA,EAAA,QAAO,AAAP,EAAS,IAAI,CAAC,aAAa,CAAC,CACtD,MAAA,CACF,GAEI,EACF,EAAQ,WAAW,CAAG,EAAM,OAAO,EAGnC,SAAS,cAAc,CAAC,UAAU,SAAS,CAAC,GAAG,CAAC,QAChD,SAAS,cAAc,CAAC,cAAc,SAAS,CAAC,GAAG,CAAC,QACpD,EAAQ,WAAW,CAAG,2EAE1B","sources":["<anon>","src/js/authentication.js"],"sourcesContent":["\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire94c2\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire94c2\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $jy3SA = parcelRequire(\"jy3SA\");\n/*NOTE:\nThis is an extreamly simplified authentication flow. I spent way too long trying to get this to work\nwith first a more traditional password and email flow, which got stuck at reset passowrd.\nThen i tried to use just email login and sign up with usernames but this flopped aswell when trying\nto update the username colomn of the profiles table so that the user can have a username\nConsidering this has taken me over a week to try and get working i opted for the most simple approach\ni can. Just email confirmation login. No usernames, no passowrds just email. I might come back and try\nto improve this later but i really just want to move on past this and work on some actual projects.\n\nI admit this is a cop out but this is also just a protfolio page which needs user acounts for one simple\ntask. So i believe in this case it's justified\n*/ const $c4695332e7f665f1$var$login = document.getElementById(\"login\");\nconst $c4695332e7f665f1$var$message = document.getElementById(\"message\");\nif ($c4695332e7f665f1$var$login) $c4695332e7f665f1$var$login.addEventListener(\"submit\", async (event)=>{\n    event.preventDefault();\n    const email = document.getElementById(\"email\").value;\n    var { data: data, error: error } = await (0, $jy3SA.supabase).auth.signInWithOtp({\n        email: email\n    });\n    if (error) $c4695332e7f665f1$var$message.textContent = error.message;\n    else {\n        //window.location.href = \"./index.html\";\n        document.getElementById(\"submit\").classList.add(\"hide\");\n        document.getElementById(\"no-account\").classList.add(\"hide\");\n        $c4695332e7f665f1$var$message.textContent = \"Check your email and click the link to login. \\n You can close this tab.\";\n    }\n});\n /*if (signup) {\n  document.getElementById(\"signup\").addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n\n    const email = document.getElementById(\"email\").value;\n    const username = document.getElementById(\"username\").value;\n\n    try {\n\n      //this will create a user if one does not exist\n      var { data, error } = await supabase.auth.signInWithOtp({\n        email,\n      })\n\n      //there was an error with user login/signup\n      if (error) {\n        console.log(error.message)\n        return\n      }\n\n      var { data: { user }, userError } = await supabase.auth.getUser()\n\n      console.log(user)\n\n      //if the user did not exist prior to signInWithOtp call they would now\n      //have a username of null deu to the trigger on the auth.user table\n      //if this is the case their usename should be updated with the one they\n      //entered, othewise they will just be logged in an their username will \n      //stay the same\n\n      if (userExists()) {\n        console.log(\"this is where you redirect existing user\")\n        //window.location.href = '../index.html'\n        return\n      }\n\n      if (!updateUsename(username)) {\n        console.log(\"error updating username\")\n        return\n      }\n\n      //the user should be logged in so they can just go to the home page\n      console.log(\"this is where you redirect the new user\")\n      //window.location.href = '../index.html'\n\n    } catch (err) {\n      message.textContent = \"some big bad scary error\"\n      console.error(err)\n    }\n  })\n}\n\n\nasync function updateUsename(username) {\n  const { error } = await supabase\n    .from('profiles')\n    .insert({ username: username })\n  if (error) {\n    console.log(error.message)\n    return false\n  }\n  return true\n}*/ \n\n\n//# sourceMappingURL=login.6a64468c.js.map\n","import { supabase } from \"./supabaseClient.js\";\n/*NOTE:\nThis is an extreamly simplified authentication flow. I spent way too long trying to get this to work\nwith first a more traditional password and email flow, which got stuck at reset passowrd.\nThen i tried to use just email login and sign up with usernames but this flopped aswell when trying\nto update the username colomn of the profiles table so that the user can have a username\nConsidering this has taken me over a week to try and get working i opted for the most simple approach\ni can. Just email confirmation login. No usernames, no passowrds just email. I might come back and try\nto improve this later but i really just want to move on past this and work on some actual projects.\n\nI admit this is a cop out but this is also just a protfolio page which needs user acounts for one simple\ntask. So i believe in this case it's justified\n*/\n\nconst login = document.getElementById(\"login\");\nconst message = document.getElementById(\"message\");\n\nif (login) {\n  login.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n\n    const email = document.getElementById(\"email\").value;\n\n    var { data, error } = await supabase.auth.signInWithOtp({\n      email,\n    })\n\n    if (error) {\n      message.textContent = error.message;\n    } else {\n      //window.location.href = \"./index.html\";\n      document.getElementById(\"submit\").classList.add(\"hide\")\n      document.getElementById(\"no-account\").classList.add(\"hide\")\n      message.textContent = \"Check your email and click the link to login. \\n You can close this tab.\"\n    }\n  })\n}\n\n/*if (signup) {\n  document.getElementById(\"signup\").addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n\n    const email = document.getElementById(\"email\").value;\n    const username = document.getElementById(\"username\").value;\n\n    try {\n\n      //this will create a user if one does not exist\n      var { data, error } = await supabase.auth.signInWithOtp({\n        email,\n      })\n\n      //there was an error with user login/signup\n      if (error) {\n        console.log(error.message)\n        return\n      }\n\n      var { data: { user }, userError } = await supabase.auth.getUser()\n\n      console.log(user)\n\n      //if the user did not exist prior to signInWithOtp call they would now\n      //have a username of null deu to the trigger on the auth.user table\n      //if this is the case their usename should be updated with the one they\n      //entered, othewise they will just be logged in an their username will \n      //stay the same\n\n      if (userExists()) {\n        console.log(\"this is where you redirect existing user\")\n        //window.location.href = '../index.html'\n        return\n      }\n\n      if (!updateUsename(username)) {\n        console.log(\"error updating username\")\n        return\n      }\n\n      //the user should be logged in so they can just go to the home page\n      console.log(\"this is where you redirect the new user\")\n      //window.location.href = '../index.html'\n\n    } catch (err) {\n      message.textContent = \"some big bad scary error\"\n      console.error(err)\n    }\n  })\n}\n\n\nasync function updateUsename(username) {\n  const { error } = await supabase\n    .from('profiles')\n    .insert({ username: username })\n  if (error) {\n    console.log(error.message)\n    return false\n  }\n  return true\n}*/\n"],"names":["$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$jy3SA","$c4695332e7f665f1$var$login","document","getElementById","$c4695332e7f665f1$var$message","addEventListener","event","preventDefault","email","value","data","error","supabase","auth","signInWithOtp","textContent","message","classList","add"],"version":3,"file":"login.6a64468c.js.map"}