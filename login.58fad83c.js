var e=globalThis,t={},n={},o=e.parcelRequire94c2;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,o.call(i.exports,i,i.exports),i.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequire94c2=o),o.register;var i=o("jy3SA");const a=document.getElementById("login"),r=document.getElementById("signup"),s=document.getElementById("message"),l=document.getElementById("submit"),u=document.getElementById("loader");function d(e,t){t.classList.toggle("hide"),e.classList.toggle("hide")}a&&a.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("email").value;d(l,u);let{data:n,error:o}=await (0,i.supabase).auth.signInWithOtp({email:t,options:{emailRedirectTo:"https://gogogadgetgithub.github.io/portfolio"}});d(l,u),o?s.textContent=o.message:(document.getElementById("submit").classList.add("hide"),s.textContent="Check your email and click the link to login. \n You can close this tab.")}),r&&document.getElementById("signup").addEventListener("submit",async e=>{e.preventDefault(),d(l,u);let t=document.getElementById("email").value,n=document.getElementById("username").value;try{let{data:e,error:o}=await (0,i.supabase).auth.signInWithOtp({email:t,options:{emailRedirectTo:"https://gogogadgetgithub.github.io/portfolio"}});if(o){s.textContent=o.message,d(l,u);return}let{data:a,error:r}=await (0,i.supabase).functions.invoke("new-user",{body:{username:n,email:t}});r&&console.error(`error invoking new user edge functions: ${r.message}`)}catch(e){s.textContent="some big bad scary error",console.error(e)}d(l,u)});
//# sourceMappingURL=login.58fad83c.js.map
