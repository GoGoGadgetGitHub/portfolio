var e=globalThis,t={},a={},n=e.parcelRequire94c2;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var o={id:e,exports:{}};return t[e]=o,n.call(o.exports,o,o.exports),o.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},e.parcelRequire94c2=n),n.register;var o=n("jy3SA");const s=document.getElementById("login"),r=document.getElementById("signup"),l=document.getElementById("password-reset"),d=document.getElementById("forgot-password"),i=document.getElementById("message");async function u(e){let{error:t}=await (0,o.supabase).from("profiles").insert({username:e});t&&console.log(t.message)}s&&s.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("email").value,a=document.getElementById("password").value,{data:n,error:s}=await (0,o.supabase).auth.signInWithPassword({email:t,password:a});s?(i.textContent=s.message,console.log(s.message)):(window.location.href="./index.html",console.log(n))}),r&&document.getElementById("signup").addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("email").value,a=document.getElementById("password").value,n=document.getElementById("password-conf").value,s=document.getElementById("username").value;if(a!==n){i.textContent="passwords don't match...";return}try{var{data:r,error:l}=await (0,o.supabase).auth.signUp({email:t,password:a});if(l&&"user_already_exists"===l.code){(function(){e.innerContenr="";let e=document.getElementById("message"),t=document.createElement("p"),a=document.createElement("a");t.textContent="User already exists ",a.textContent="Login",a.href="../login.html",e.appendChild(t),e.appendChild(a)})();return}var{data:r,error:l}=await (0,o.supabase).auth.signInWithPassword({email:t,password:a});if(l){console.log(l.message);return}await u(s),window.location.href="../login.html"}catch(e){i.textContent="Please make sure you entered a valid email adress.",console.error(e)}}),d&&l.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("email").value,{data:a,error:n}=await (0,o.supabase).auth.resetPasswordForEmail(t,{redirectTo:"https://gogogadgetgithub.github.io/portfolio/resetPassword.html"});n?console.log(n.message):console.log("no error email should have been sent")}),l&&l.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("password").value;if(t!==document.getElementById("password-conf").value){i.textContent="Passwords don't match...";return}let{data:a,error:n}=await (0,o.supabase).auth.updateUser({password:t});n?console.log(n.message):(console.log("no error, passowrd should have been reset"),window.location.href="../login.html")});
//# sourceMappingURL=login.25f20513.js.map
