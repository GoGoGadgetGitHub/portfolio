var e=globalThis,t={},n={},r=e.parcelRequire94c2;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,r.call(a.exports,a,a.exports),a.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequire94c2=r),r.register;var a=r("jy3SA");const o=document.getElementById("login"),i=document.getElementById("signup"),s=document.getElementById("message");o&&o.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("email").value,{data:n,error:r}=await (0,a.supabase).auth.signInWithOtp({email:t,options:{emailRedirectTo:"https://gogogadgetgithub.github.io/portfolio"}});r?s.textContent=r.message:(document.getElementById("submit").classList.add("hide"),s.textContent="Check your email and click the link to login. \n You can close this tab.")}),i&&document.getElementById("signup").addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("email").value,n=document.getElementById("username").value;try{let{data:e,error:r}=await (0,a.supabase).auth.signInWithOtp({email:t});if(r){console.log(r.message);return}let{data:o,error:i}=await (0,a.supabase).functions.invoke("new-user",{body:{username:n,email:t}});i&&console.error(`error invoking new user edge functions: ${i.message}`)}catch(e){s.textContent="some big bad scary error",console.error(e)}});
//# sourceMappingURL=login.a846bf09.js.map
